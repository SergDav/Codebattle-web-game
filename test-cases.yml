---
- summary: |
    Проверка создания пробной игры без регистрации
  requirement: |
    Можно запустить тестовую игру без регистрации пользователя
  prerequisites: |
    - Открыта страница сайта "https://codebattle.hexlet.io/"
  test-data: |
    Empty
  steps:
    - Нажать на "Try Simple Battle"
  expected-result: |
    Игра без регистрации успешно создана и отображается на экране
    
- summary: |
    Успешная регистрация нового пользователя на сайте
  requirement: |
    При вводе требуемых данных пользователь проходит регистрацию на сайте
    Пользователь должен иметь возможность создать учетную запись используя email
    Никнейм должен быть от 3 до 16 символов
    Никнейм может содержать только латинские буквы, цифры и знак подчеркивания
    Длина пароля от 6 до 16 символов
    Пароль может содержать латинские буквы, цифры и спец.символы
  prerequisites: |
    - Открыта форма Sign up
  test-data: |
    Empty
  steps:
    - Ввести "Nickname"
    - Ввести "Email"
    - Ввести "Password"
    - Ввести "Password Confirmation"
    - Нажать на кнопку "Submit"
  expected-result: |
    Пользователь успешно зарегистрирован
    
- summary: |
    Проверка успешной авторизации пользователя
  requirement: |
    При верном вводе логина и пароля пользователь должен успешно авторизоваться в системе
  prerequisites: |
    - Открыта форма Sign in
  test-data: |
    Email = serejadawydow@gmail.com
    Password = 248jqC
  steps:
    - Ввести Email
    - Ввести Password
    - Нажать на кнопку Submit
  expected-result: |
    Пользователь успешно авторизован

- summary: |
    Регистрация нового профиля с пустыми полями 
  requirement: |
    При отсутствии данных в полях регистрация будет невозможна
  prerequisites:
    - Открыта форма Sign up
  test-data: |
    Empty
  steps:
    - Нажать на кнопку "Submit"
  expected-result: |
    Под каждым полем ввода выводится надпись, сообщающая о необходимости заполнить поле
    
- summary: |
   Проверка регистрации нового профиля с невалидным email 
  requirement: |
    При вводе невалидного email регистрация невозможна 
  prerequisites: |
    - Открыта форма Sign up
  test-data: |
    Nickname = Morg
    Email = crybaby.com
    Password = 521goT  
  steps:
    - Ввести "Nickname"
    - Ввести "Email"
    - Ввести "Password"
    - Ввести "Password Confirmation"
    - Нажать на кнопку "Submit"
  expected-result: |
    Под полем "Email" появляется надпись "Invalid email"
    
- summary: |
    Проверка регистрации нового профиля с пустым полем nickname
  requirement: |
   Никнейм должен быть от 3 до 16 символов
  prerequisites:
    - Открыта форма Sign up
  test-data: |
    Email = tryagain@mail.com
    Password = 567213tyA 
  steps:
    - Ввести "Nickname"
    - Ввести "Email"
    - Ввести "Password"
    - Ввести "Password Confirmation"
    - Нажать на кнопку "Submit"
  expected-result: |
    Под полем "Nickname" появляется надпись "Nickname required"
    
- summary: |
    Проверка регистрации нового профиля при ошибке в поле подтверждения пароля
  requirement: |
    При несовпадении паролей регистрация невозможна
  prerequisites: |
    - Открыта форма Sign up
  test-data: |
    Nickname = Ogon
    Email = ohagain@mail.com
    Password = q000111Q  
  steps:
    - Ввести "Nickname"
    - Ввести "Email"
    - Ввести "Password"
    - Ввести "Password Confirmation" так, чтобы оно отличалось от "Password"
    - Нажать на кнопку "Submit"
  expected-result: |
    Под полем "Password Confirmation" появляется надпись "Passwords must match"
    
- summary: |
    Проверка авторизации не зарегистрированного на сайте пользователя
  requirement: |
    При вводе незарегистрированного логина и пароля должно выводиться сообщение об ошибке авторизации
  prerequisites: |
    - Открыта форма Sign in
  test-data: |
    Email = nopainnogain@mail.com
    Password = ZZZ450312
  steps:
    - Нажать на кнопку "Sign in"
    - Ввести "Email"
    - Ввести "Password"
    - Нажать на кнопку "Submit"
  expected-result: |
    Выводится сообщение об ошибке "EMAIL_NOT_FOUND"
    
- summary: |
    Проверка авторизации пользователя через GitHub
  requirement: |
    Пользователь может авторизоваться на сайте с помощью своего аккаунта на GitHub
  prerequisites: |
    - Пользователь зарегистрирован на GitHub
    - Выполнен вход в аккаунт на GitHub
    - Открыта форма Sign in
  test-data: |
    Empty
  steps:
    - Нажать на кнопку "Sign in with GitHub"
  expected-result: |
    Пользователь автоматически переходит на главную страницу сайта и на ней отображается сообщение "Successfully authenticated"

- summary: |
    Проверка авторизации пользователя через Discord
  requirement: |
    Пользователь может авторизоваться на сайте с помощью своего аккаунта на Discord
  prerequisites: |
    - Пользователь зарегистрирован на Discord
    - Выполнен вход в аккаунт на Discord
    - Открыта форма Sign in
  test-data: |
    Empty
  steps:
    - Нажать на кнопку "Sign in with Discord"
  expected-result: |
    Пользователь автоматически переходит на главную страницу сайта и на ней отображается сообщение "Successfully authenticated"

- summary: |
    Проверка восстановления пароля
  requirement: |
   На странице авторизации пользователь может восстановить свой пароль
  prerequisites: |
    - Открыта форма Sign in
  test-data: |
    Валидный Email
  steps:
    - Нажать на кнопку "Sign in"
    - Нажать на кнопку "Forgot your password?"
    - Ввести валидный "Email"
    - Нажать на кнопку "Submit"
    - На экране выводится сообщение "We have sent you an email with instructions on how to reset your password"
    - Перейти на страницу ранее указанной электронной почты 
    - Открыть на почте письмо от noreply@codebattle-5f929.firebaseapp.com
    - Перейти по ссылке из письма
    - На экране выводится окно сброса пароля
    - Заполнить поле "New password"
    - Нажать на кнопку "Save"
  expected-result: |
    На экране выводится сообщение "Password changed. You can now sign in with your new password"
    
- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователь должен иметь возможность создать игру и играть в неё с ботом
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница сайта "https://codebattle.hexlet.io/#lobby"
  test-data: |
    Level = по умолчанию
    Game Type = With a bot
    Time control = по умолчанию
    Choose task by name or tags = по умолчанию
  steps:
    - Нажать на кнопку "Create a game"
    - Создаем игру по указанным параметрам (test-data)
    - Нажать на кнопку "Create the battle"
  expected-result: |
    Создалась и начинается игра против бота

- summary: |
    Проверка возможности выбора уровня сложности задания игры
  requirement: |
    Пользователь имеет возможность выбрать уровень сложности задания игры
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница сайта "https://codebattle.hexlet.io/#lobby"
  test-data: |
    Level = любой из доступных
    Game Type = по умолчанию 
    Time control = по умолчанию
    Choose task by name or tags = по умолчанию
  steps:
    - Нажать на кнопку "Create a game"
    - Создаем игру по указанным параметрам (test-data)
    - Нажать на кнопку "Create battle"
  expected-result: |
    Игра выбранного уровня сложности создалась

- summary: |
    Проверка создания приглашения другу для игры
  requirement: |
    Пользователи должны иметь возможность приглашать конкретных пользователей в игру
  prerequisites: |
    Два авторизованных пользователя
    Открыта главная страница сайта "https://codebattle.hexlet.io/#lobby"
  test-data: |
    Level = по умолчанию
    Game Type = With a friend
    Time control = по умолчанию
    Choose task by name or tags = по умолчанию
  steps:
    - Нажать на кнопку "Create a game"
    - Нажимаем кнопку "With a friend"
    - Вписываем и/или выбираем имя друга (второй пользователь)
    - Нажать на кнопку "Create invite"
  expected-result: |
    Пользователь получил приглашение на игру

- summary: |
    Проверка принятия приглашения от друга на игру
  requirement: |
    Пользователи должны иметь возможность принимать отправленное им приглашение на игру 
  prerequisites: |
    Два авторизованных пользователя
    Открыта главная страница сайта "https://codebattle.hexlet.io/#lobby"
    Приглашение на игру отправлено второму пользователю
  test-data: |
    Empty
  steps:
    - В профиле второго пользователя нажимаем на значок с двумя скрещенными мечами в шапке главной страницы сайта 
    - Нажать на кнопку "Accept"
  expected-result: |
    Оба пользователя автоматически перенаправляются на страницу с игрой
    
- summary: |
    Проверка отклонения приглашения от друга на игру
  requirement: |
    Пользователи должны иметь возможность отклонять отправленное им приглашение на игру 
  prerequisites: |
    Два авторизованных пользователя
    Открыта главная страница сайта "https://codebattle.hexlet.io/#lobby"
    Приглашение на игру отправлено второму пользователю
  test-data: |
    Empty
  steps:
    - В профиле второго пользователя нажимаем на значок с двумя скрещенными мечами в шапке главной страницы сайта 
    - Нажать на кнопку "Decline"
  expected-result: |
    Уведомление о приглашении пропадает у обоих пользователей
    
- summary: |
    Проверка создания игры с другим пользователем
  requirement: |
    Пользователи должны иметь возможность создавать игры и играть в них против других пользователей
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница сайта "https://codebattle.hexlet.io/#lobby"
  test-data: |
    Level = по умолчанию
    Game Type = "With other user"
    Time control = по умолчанию
    Choose task by name or tags = по умолчанию
  steps:
    - Нажать на кнопку "Create a game"
    - Создаем игру по указанным параметрам (test-data)
    - Нажать на кнопку "Create battle"
  expected-result: |
    Игра отображается в списке (LOBBY) на главной странице
